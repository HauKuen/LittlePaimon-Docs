---
title: 插件管理
icon: plugin
order: 2
category:
  - 功能配置
---
::: info 权限
使用以下命令需要`超级用户(SUPERUSER)`、`群主(OWNER)`或`群管理(ADMIN)`权限。
:::
## 禁用/启用插件
::: info 提示
该方法只是对插件的功能进行阻拦，如果希望**完全不加载**某个插件，则需要在对应插件的文件夹名首位添加`_`或直接删除文件夹。
:::

### 在`Web UI`中使用(推荐)
你可以在`Web UI控制台-机器人配置-插件管理`以可视化的方式来管理插件。

### 在`QQ`中以命令形式使用

- 命令：**`pm ban|unban <插件名> -g <群号> -u <用户号>`**
- 参数：
  - ban|unban：禁用/启用
  - <插件名>：可以是中/英文或者`all`，`all`表示所有插件，多个插件用空格分隔
  - <群号>：
    - 默认值：不填时为命令当前群，多个群号用空格分隔
    - 权限：群主和群管只能管理本群，超级用户可以管理所有群
  - <用户号>：
    - 默认值：不填时则为本群所有用户，多个用户用空格分隔
    - 权限：群主和群管可以管理本群的用户，超级用户可以管理所有用户
- 额外说明：
  - 如果要全局禁用/启用某一个用户，需要超级用户**私聊**Bot来使用命令
- 示例：
  - `pm ban all -g 123456789 -u 123456789`
  - `pm unban 原神信息查询 -g 123456789`
  - `pm ban 原神信息查询 原神Wiki -u 123456`

## 设置插件配置

::: info 提示
- 如插件无特殊说明，其配置项都在`bot目录/config/paimon_config.yml`文件中，你可以通过手动修改配置项(重启生效)，或在`Web UI`中或使用命令**动态修改**配置项。
- 部分配置项需要**重启**机器人才能生效，例如涉及**定时任务**的配置。
- 直接修改`yml`需要你了解`yml`的基本语法，可以参考[这里](https://blog.csdn.net/weixin_43340943/article/details/105953673)，如果不熟悉，请**不要**直接修改。
  :::

### 在`Web UI`中使用(推荐)
你可以在`Web UI控制台-机器人配置-配置项管理`以可视化的方式来管理配置项，配置项的各种具体说明也在`Web UI`中。

### 在`QQ`中以命令形式使用

- 命令：**`pm set <配置名> <配置值>`**
- 参数：
  - <配置名>：须全称
  - <配置值>：开关类配置值可以设为`on`或`off`，其他配置值无特殊说明则为**整数**
- 示例：
  - `pm set 启动CookieWeb on`
  - `pm set 模拟抽卡群冷却 120`


## 自定义命令别名
你可以在`Web UI控制台-机器人配置-命令别名`中为命令设置自定义别名，并且可以即可在其中测试别名效果。
### 配置参数说明
- 匹配模式：
  - 普通模式：以普通的对比字符串前后缀的形式进行匹配替换
  - 正则模式：以正则表达式的形式进行匹配替换，需要你了解**正则表达式**(写错了可能会报错)
- 命令别名：也就是要设置的新的命令
- 原命令：也就是要被替换的原命令
- 匹配位置：当匹配模式为**普通匹配**时需要
  - 前缀：匹配以该**命令别名**开头的
  - 后缀：匹配以该**命令别名**结尾的
  - 全匹配：完全等于该**命令别名**的
- 是否反转：当匹配模式为**普通匹配**时需要
  - 不勾选：则正常的按照顺序替换
  - 勾选：将会将匹配到的命令和命令附带的参数位置调转
- 设置群：也就是生效的群，选择`全局`则为全局生效

### 配置例子
**普通匹配**模式（适合大部分简单情况）：

1. 为`ysd<角色名>`设置别名`角色信息<角色名>`
```yaml
匹配模式: 普通匹配
命令别名: 角色信息
原命令: ysd
匹配位置: 前缀
是否反转: false
设置群: 自行选择
```

2. 为`<角色名>角色图鉴`设置别名`<角色名>攻略`
```yaml
匹配模式: 普通匹配
命令别名: 攻略
原命令: 角色图鉴
匹配位置: 后缀
是否反转: false
设置群: 自行选择
```

3. 为`ysd<角色名>`设置别名`<角色名>面板`
```yaml
匹配模式: 普通匹配
命令别名: 面板
原命令: ysd
匹配位置: 后缀
是否反转: true
设置群: 自行选择
```

4. 为`<角色名>角色图鉴`设置别名`查看图鉴<角色名>`
```yaml
匹配模式: 普通匹配
命令别名: 查看图鉴
原命令: 角色图鉴
匹配位置: 前缀
是否反转: true
设置群: 自行选择
```

**正则匹配**模式（适合一些复杂的情况）：

5. 为`ysd<角色名>`设置别名`查看<角色名>面板`
```yaml
匹配模式: 正则匹配
命令别名: 查看(.+)面板
原命令: ysd\1
设置群: 自行选择
```

6. 为`ysd<角色名>`设置别名`面板<角色名>`或`查询<角色名>`或`查看<角色名>`
```yaml
匹配模式: 正则匹配
命令别名: 面板|查询|查看
原命令: ysd
设置群: 自行选择
```

7为`ysd<角色名>`设置别名`<角色名>面板`或`<角色名>查询`或`<角色名>伤害`
```yaml
匹配模式: 正则匹配
命令别名: (.+)(面板|查询|伤害计算)
原命令: ysd\1
设置群: 自行选择
```